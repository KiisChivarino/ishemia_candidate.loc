<h1>Мониторинг больных с ИБС</h1>

<h2>Информация о проекте</h2>

Требуется разработать систему мониторинга больных с ишемической болезнью сердца (хронической сердечной недостаточностью), а также с острым корональным синдромом. Проект должен учитывать как региональное разделение, так и возможное расширение по странам, что требуется заложить в архитектуре проекта. Допустим переход пациента с одного региона в другой, а также смена страны, с сохранением всей истории лечения.

<h3>Основные разделы:</h3>

Приложение состоит из кабинета врача, кабинета пациента и панели администрирования.

<details>

<summary><h3>Мониторинг анализов</h3></summary>

Приложение производит мониторинг анализов пациентов:

- план анализов для нового пациента
- назначение анализов пациенту
- предупреждение об этапах прохождения анализов
- отчеты о превышении нормальных значений для анализов
- уведомления врачу и пациенту о событиях проведения анализов

</details>

<details>

<summary><h3>Мониторинг приема лекарств:</h3></summary>

Приложение производит мониторинг лекарств, которые принимают пациенты:

- назначение лекарств пациенту
- информация о принимаемых пациентом лекарствах
- уведомления врачу и пациенту о событиях приема лекарств


</details>

<details>

<summary><h3>Мониторинг приемов у врача:</h3></summary>

Приложение производит мониторинг приемов пациентов у врача:

- уведомления врачу и пациенту о событиях приема у врача
- информация о приеме у врача (о планируемом приеме, о результатах приема)

</details>


<details>

<summary><h3>История болезни:</h3></summary>

Для каждого пациента создается история болезни, в которую записываются первоначальные данные о больном, назначения лекарств, назначения обследований, приемы у врача, а также уведомления.

<h3>Хранимые данные:</h3>

Приложение хранит информацию со следующими данными:

- врачи
- пациенты
- локации (страна, регионы, районы, города, больницы)
- анализы (группы анализов, анализы, предельные нормальные значения анализов)
- лекарства
- диагнозы
- истории болезни
- анализы пациентов (план анализов для пациента, назначенные анализы пациента, результаты анализов пациента)
- назначения (назначение лекарств, назначение анализов)
- лекарства, принимаемые пациентами
- приемы у врача
- лог событий о действиях врачей и пациентов в системе
- sms (шаблоны sms, переданные sms)
- email (шаблоны email, переданные email)

</details>


<details>

<summary><h3>Информирование пациента</h3></summary>

Информирование пациента должно проводиться через личный кабинет пациента, а также посредством email (по выбору пациента) и sms (по выбору пациента). 
Для информирования используется отдельный модуль для отправки уведомлений, который в зависимости от выбора пациента будет отправлять различного типа уведомления, либо посредством sms, либо по электронной почте.
Для упрощения использования предусмотрены шаблоны для групп уведомлений со стандартизированными текстами уведомлений, которые можно гибко изменять.
При отправке по sms предусмотрена повторная отправка уведомления в случае если пациент по каким-либо причинам не получил sms (проблемы на стороне провайдера услуг).
При отправке уведомления в кабинет пациента предусмотрена проверка на просмотр.

</details>

<details>
<summary><h3>Логирование</h3></summary>

В систме предусмотрен автономный модуль логирования, который регистрирует все действия пользователей и действия системы. Логируемые действия:

- вход и выход пользователя из системы (login/logout)
- создание данных в системе (create)
- редактирование данных в системе (update)
- удаление данных в системе (delete)
- выполнение автоматических действий системой (success)
- работа команды / отправка смс завершилась с ошибкой (fail)
- ошибка в ходе работы (error)

</details>

<details>

<summary><h3>Получение информации от пациента чрез SMS</h3></summary>

Пациент может ответить на присланное ему sms сообщение. Система втоматически раз в какое-то настраевоемое время проверяет ящик входящих SMS сообщений, если сообщение было отправлено пациентом зарегистрированным в системе, оно сохранится с системе и станет доступно для просмотра.

</details>

<details>

<summary><h3>Отчеты</h3></summary>

Для удобства вывода информации требуется разработать единую систему формирования отчета (в графическом виде или текстовом в зависимости от запроса и особенностей отчета)
Т.е. необходимо использовать разные данные из разных таблиц предоставить простой интерфейс сборки отчета (пример: требуется вывести количество пациентов с параметром "тромбоциты". Выбрать таблицу дневников пациентов - выбрать параметр проекта, далее система должна сформировать отчет в json виде, который в дальнейшем может быть использован как к графическом так и в текстовом виде).

</details>

<details>

<summary><h2>Требования к техническому исполнению:</h2></summary>

Для ядра проекта требуется использовать нативный язык php, версии 7.1 или выше (допустимо использовать небольшие библиотеки с полным комментированием кода), база данных - PostgreSQL, с обязательным резервированием всех данных. Средство общения ядра проекта с внешними средами только через api, формат общения - json.

Защита должна быть выполнена через обязательную двухфакторную аутентификацию пользователей системы, а именно: связка логин и пароль, а также смс код для входа.

Ядро проекта должно быть развернуто в операционной системе АльтЛинукс, для соответствия требованиям федерального законодательства в сфере защиты персональных данных.

Ядро системы должны быть модульным и стиль написания кода должен подразумевать объектно ориентированный. Требуется максимальная возможная независимость модулей проекта для последующего расширения проекта и введения дополнительного функционала. Каждый модуль (класс) должен быть описан комментариями.

Ядро проекта должны быть закрыто SSL сертификатом, а общение должно происходить по протоколу https.

</details>

<h2>Структура сайта</h2>

<details>

<summary><h3>Страницы кабинета пациента</h3></summary>

<details>

<summary><h4>Общие элементы</h4></summary>

<h5>Шапка сайта:</h5>

- название страницы
- кнопки (опционально)

<h5>Боковая панель (сверху вниз):</h5>

- заголовок проекта со ссылкой на главную страницу
- фото пациента: при нажатии открывается модальное окно замены фото
- ФИО пациента
- Пункты меню:
    - главная
    - артериальное давление (выделить)
    - пульс (выделить)
    - назначения лекарств
    - уведомления
    - обследования
        - липидный профиль
        - глюкоза
        - ЭКГ
        - МНО
        - ОАК
    - информация
    - чат (в перспективе)
    - кнопка «Выход»

</details>

<details>

<summary><h4>Главная станица</h4></summary>

<h5>Шапка сайта:</h5>

- в названии ФИО пациента
- кнопка «заявка на прием»

<h5>Контент:</h5>

- блок назначений
- блок уведомлений
- <h6>Блоки-ссылки на внесение анализов:</h6>

    - блок **«на внесение артериального давления»**
    - блок **«на внесение пульса»**
    - блок «вес (с индексом массы тела)»
- блок календарь анализов и приемов
- блок «анонсы статей»
- Кнопка «Получить историю болезни»

</details>

<details>

<summary><h4>Страница «Назначения»</h4></summary>

    Вкладки: новые, история

<h5>Список назначений (одно назначение - одна строка)</h5>

- дата,
- лекарства: способ приема, время приема
- анализы: название группы анализов, время сдачи
- информация о враче, выписавшем назначение

</details>

<details>

<summary><h4>Страница «Уведомления»:</h4></summary>

    Вкладки: новые, история

<h5>Список (для всех вкладок):</h5>

- тип уведомления
- текст уведомления


</details>

<details>

<summary><h4>Страница обследования (аналогично для каждого подпункта):</h4></summary>

    Вкладки: новые, история
<h5>Вкладка «Новые»:</h5>

<h5>Список:</h5>

- дата сдачи
- Кнопка «Внести результаты»
  <h5>Вкладка «История»:</h5>

- Список:
    - дата
    - параметр 1, параметр2...
- График *(в перспективе)*

<h5>Окно «Внесение результатов»:</h5>

    Вкладки: Фото, Вручную

- Дата проведения (выбор даты)

<h6>Вкладка «Фото»:</h6>

- --

- кнопка «Добавить фото»
- фотография результатов
- --  
<h6>Вкладка «Вручную»:</h6>

- --

Форма внесения результатов анализов:

- результат (ввод значения)
- выбор референтного значения
- --

- Кнопка «Сохранить»
- Кнопка «Отмена»
> *Для глюкозы, артериального давления, пульса добавление результатов только вручную.*


</details>

<details>

<summary><h4>Страница «ЭКГ»</h4></summary>

- Список:
    - дата
    - фото ЭКГ
    - описание (результаты, вывод)
> *Структуру страницы ЭКГ уточнить*

</details>

<details>

<summary><h4>Страница «Информация»:</h4></summary>

- список статей
- статья в модальном окне

> **Все страницы кабинета пациента должны быть адаптированы для мобильных
версий.**

</details>

</details>

<details>

<summary><h3>Страницы кабинета врача:</h3></summary>

<details>

<summary><h4>Общие элементы:</h4></summary>

<h5>Шапка:</h5>

- Заголовок проекта (со ссылкой на главную)
- Верхнее меню
- Поиск по пациенту
- ФИО врача
- Должность врача
- Аватар врача
- Кнопка «выйти»
  <h5>Боковая панель:</h5>

- Меню:
    - пациенты
    - больницы


</details>

<details>

<summary><h4>Страница «Пациенты»:</h4></summary>

- Кнопка «Новый пациент»


    Вкладки: Фото, Вручную
- --

> Пациенты распределяются по вкладкам в зависимости от текущего состояния их обследований:
>- подошел срок обследования (пациенту отправлено уведомление), но результаты еще не переданы - во вкладке «новые»
>- результаты обследования переданы, но не обработаны врачом - во вкладке «необработанные»
>- результаты переданы и обработаны - во вкладке «история»
  - --
<h5>Таблица пациентов:</h5>

- ФИО
- возраст
- диагноз
- район
- комментарий
- последние показатели (причина цвета)

> При нажатии на ФИО пациента переход на страницу история болезни

</details>

<details>

<summary><h4>Страница «Добавить пациента»</h4></summary>

<h6>Раздел «Личные данные»</h6>

> Обязательные для заполнения поля для Пользователя и Пациента

- Телефон
- Фамилия
- Имя
- Дата рождения
- Адрес
- Город
- Больница
> Город не является обязательным полем, но является фильтром для выбора больницы

> Свернутые необязательные для заполнения поля для Пользователя и Пациента

- Отчество
- email
- СНИЛС
- Номер страховки
- Серия и номер паспорта
- Дата выдачи паспорта
- Орган, выдавший паспорт
- Код органа, выдавшего паспорт
- Дата возникновения инфаркта
- Вес
- Рост
- Район
- информировать по смс
- информировать по email

<h6>Раздел «Анамнестические данные»</h6>

> Обязательные для заполнения поля

- основное заболевание


> Свернутые необязательные поля

- фоновые заболевания
- осложнения основного заболевания
- сопутствующие заболевания
- анамнез заболевания
- анамнез жизни


> Анамнезы выбираются из подготовленных шаблонов и вставляются в поле редактировния текста

<h6>Раздел «Объективные данные»</h6>

> Обязательные для заполнения поля

- вид приема
- жалобы
- комментарий врача по жалобам (не является обязательным, расширяет жалобы)
- рекоммендации врача


> Свернутые необязательные поля

- объективный статус на момент включения (текст)
- получаемая терапия на момент включения (текст)

<h6>Раздел «Лабораторные данные»</h6>

- выписные эпикризы (добавление сканкопий выписки из ЛПУ)


> по плану анализов выводятся формы добавления результатов обследований, необходимых при первом посещении: ЭКГ, Липидный профиль, Глюкоза, Натрийуретический пептид, АД, ЧСС
> после добавления анализам присваиваются статусы обработано врачом, пройдено

- Название группы анализов
    - Название анализа
        - Фотография результатов (если есть)
        - Дата проведения (выбор даты)
        - результат (ввод значения)
        - выбор референтного значения



> При добавлении пациента ему создаются: История болезни, первый прием, первые обследования, приемы по плану с назначениями на прием, обследования по плану с назначениями на обследование. Даты приемов и обследований вычисляются в соответствии с планом от даты возникновения инфаркта.

</details>

<details>

<summary><h4>Страница «История болезни»</h4></summary>

<h5>В верхнем меню ссылки:</h5>

- обследования
- уведомления
- прием лекарств
- приемы пациента

<h5>Информация о пациенте:</h5>

<h6>Личные данные:</h6>

    Кнопка "Внести личные данные"

- ФИО (строка)
- Возраст (число)
- Адрес (строка)
- Полис (строка)
- СНИЛС (строка)
- Паспортные данные (2 строки: серия-номер, кем и когда выдан)
- телефон (строка)
- email (строка)
- Включенные оповещения (строка)
- вес (число)
- рост (число)
- ИМТ (число)
- Дата возникновения инфаркта
- больница, к которой прикреплен (строка)

<h6>Анамнестические данные:</h6>

    Кнопка "Внести анамнестические данные"
- дата начала лечения
- дата окончания лечения
- основное заболевание (строка)
- фоновые заболевания (список)
- осложнения основного заболевания (список)
- сопутствующие заболевания (список)
- анамнез заболевания (текст)
- анамнез жизни (текст)

<h6>Объективные данные:</h6>

    Кнопка "Внести объективные данные"

- жалобы на момент включения в систему (список + текст: рекоммендации врача)
- объективный статус на момент включения (текст)
- получаемая терапия на момент включения (текст)

<h6>Лабораторные данные:</h6>

    Кнопка "Добавить результаты обследований"
    Кнопка "Добавить выписные эпикризы"

- Выписные эпикризы *(скан выписки из ЛПУ, где находился по поводу основного заболевания за последние 6 месяцев)*
- Результаты обследований на момент включения *(давность не более 3 месяцев)*.
    - Название обследования
    - Сканы документов
    - Таблицы результатов (параметр: значение)

<h5>Окно Внести личные данные</h5>

<h6>Форма внесения личных данных</h6>

- Фамилия
- Имя
- Отчество
- Дата рождения
- Адрес (строка)
- Номер полиса (строка)
- СНИЛС (строка)
- Серия и номер паспорта
- Дата выдачи
- Кем выдан
- Номер подразделения
- телефон (строка)
- email (строка)
- Оповещать по СМС
- Оповещать по Email
- вес (число)
- рост (число)
- дата возникновения инфаркта
- больница, к которой прикреплен (строка)
- Кнопка **«Внести»**
- Кнопка **«Отменить»**

<h5>Окно Внести анамнестические данные</h5>

<h6>Форма внесения анамнестических данных</h6>

- дата начала лечения
- дата окончания лечения
- основное заболевание (строка)
- фоновые заболевания (список)
- осложнения основного заболевания (список)
- сопутствующие заболевания (список)
- анамнез заболевания (текст)
- анамнез жизни (текст)
- Кнопка **«Внести»**
- Кнопка **«Отменить»**

<h5>Окно Внести объективные данные</h5>

<h6>Форма внесения объективных данных</h6>

- выбор жалоб *(множественный выбор)*
- комментарий врача по жалобам
- объективный статус на момент включения (текст)
- получаемая терапия на момент включения (текст)
- Кнопка **«Внести»**
- Кнопка **«Отменить»**

<h6>Окно Добавить выписные эпикризы</h6>

- Кнопка **"Фото скана выписки из ЛПУ"**
- Кнопка **«Добавить»**
- Кнопка **«Отменить»**

<h5>Окно Добавить результаты обследований</h5>

<h6>Форма добавления результатов обследований</h6>

- выбор группы анализов
- Фотография результатов *(если есть)*
- Дата проведения *(выбор даты)*

>После выбора группы анализов появляются формы добавления анализов этой группы

<h6>Форма добавления анализа</h6>

- --
- результат (ввод значения)
- выбор референтного значения
- --   

- Кнопка **«Сохранить»**
- Кнопка **«Отмена»**

<h5>История болезни:</h5>

    Кнопка: «Назначить прием лекарств»
    Кнопка: «Пригласить на прием»
    Фильтр по датам
<h6>Таблица записей в историю болезни:</h6>

- дата
- результаты анализов
    - результаты анализа (группа анализов, анализ, дата сдачи, значение)
    - Кнопка **«Открыть фото»**
    - способ передачи результатов
    - кем переданы результаты
- назначения обследований
    - название группы анализов
    - планируемая дата сдачи
    - ФИО врача, сделавшего назначение
- назначения лекарств
    - название лекарства
    - инструкция по применению
        - тип лекарства (таблетки, суспензии\...)
        - способ приема (подкожно, внутримышечно, ректально\...)
        - доза (кол-во грамм, штук, капель\...)
        - длительность приема
        - периодичность приема
    - ФИО врача, сделавшего назначение
- приемы пациентов
    - дата приема
    - тип приема
    - список жалоб
    - комментарий врача
    - ФИО врача, сделавшего прием
> *В перспективе графическое представление результатов анализов и приема лекарств*

</details>

<details>

<summary><h4>Страница «Назначения»:</h4></summary>

    Вкладки: Назначенные, Не назначенные

> Если врач поставил флаг "Назначено", то отправляется уведомление пациенту с просьбой подтвердить назначение

    Кнопка «Добавить назначение»

<h5>Список назначений</h5>

- дата добавления назначения
- назначенные приемы
    - дата включения в назначение
    - врач, включивший в назначение
    - дата приема
    - тип приема
- назначенные лекарства
    - дата включения в назначение
    - врач, включивший в назначение
    - название лекарства
    - инструкция по применению
    - дата начала приема лекарств
- назначенные обследования
    - дата включения в назначение
    - врач, включивший в назначение
    - название группы анализов
    - дата начала проведения обследования
    - дата завершения проведения обследования
- операции (для не назначенных)
    - изменить назначение
    - удалить назначение


</details>

<details>

<summary><h4>Страница «Назначить прием лекарств»:</h4></summary>

    Кнопка «Добавить лекарство»
    Кнопка «Добавить обследование»

<h5>Список добавленных лекарств:</h5>

- название лекарства
- инструкция по применению
    - тип лекарства (таблетки, суспензии\...)
    - способ приема (подкожно, внутримышечно, ректально\...)
    - доза (кол-во грамм, штук, капель\...)
    - длительность приема
    - периодичность приема
- действия:
    - Кнопка **«Изменить»**
    - Кнопка **«Удалить»**

<h5>Список добавленных обследований:</h5>

- планируемая дата проведения
- название группы анализов
- действия:
    - Кнопка **«Изменить»**
    - Кнопка **«Удалить»**

  Кнопка **«Отправить назначение пациенту»**

<h5>Окно «Добавить лекарство»</h5>

<h6>Форма добавления лекарства:</h6>

- выбор препарата (поиск)
- инструкция по применению (выбор из шаблонов с последующим редактированием текста)
- Кнопка **«Добавить»**
- Кнопка **«Отменить»**

<h5>Окно «Добавить обследование»</h5>

<h6>Форма добавления обследования:</h6>

- планируемая дата проведения
- название группы анализов
- Кнопка **«Добавить»**
- Кнопка **«Отменить»**


</details>

<details>

<summary><h4>Страница «Обследования»</h4></summary>

    Кнопка «Назначить обследование»

- Вкладки:
    - новые (пациенту отправлено уведомление, результаты не введены, фото не добавлено)
    - необработанные (результаты введены или фото добавлено, но не обработано врачом)
    - история (результаты введены, обработано врачом)
    - запланированные (пациенту еще не отправлено уведомление)
- Фильтры:
    - по группам анализов
    - по дате проведения «от - до»

<h5>Список обследований «Новые»:</h5>

- название группы анализов
- дата начала проведения обследования
- дата завершения проведения обследования
- Кнопка **«Внести результаты анализов»**

<h5>Список обследований «Необработанные»:</h5>

- название группы анализов
- фактическая дата проведения обследования

По нажатию на группу анализов появляется список анализов и результатов:

- название анализа
- единица измерения
- предельные нормальные значения
- внесенное значение
- Кнопка **«Открыть фото»**
- Кнопка **«Внести результаты анализов»**

<h5>Список обследований «Запланированные»</h5>

- название группы анализов
- дата начала проведения обследования
- дата завершения проведения обследования

<h5>Окно «Внесение результатов»:</h5>

- Вкладка «Фото»
    - Фотография результатов *(если есть)*
    - Дата проведения *(выбор даты)*
- Вкладка «Вручную»:
  <h6>Форма внесения результатов анализов</h6>

    - результат (ввод значения)
    - выбор референтного значения
- Кнопка **«Сохранить»**
- Кнопка **«Отмена»**
  <h5>Список обследований «История»:</h5>

- название группы анализов
- фактическая дата проведения

  По нажатию на группу анализов появляется список анализов и результатов:
    - название анализа
    - единица измерения
    - предельные нормальные значения
    - внесенное значение
    - Кнопка **«Открыть фото»**
- *График анализов (в перспективе)*
- *Список принимаемых лекарств справа от графика (в перспективе)*

</details>

<details>

<summary><h4>Страница «Уведомления»</h4></summary>

    Кнопка «Добавить уведомление»
<h5>Список уведомлений:</h5>

- тип уведомления
- отправивший врач
- дата и время отправки
- способы отправки
  <h5>Окно «Добавить уведомление»</h5>

<h6>Форма добавления уведомления:</h6>

- выбор типа уведомления
- выбор способов отправки (смс, email)
- Кнопка **«Сохранить»**
- Кнопка **«Отмена»**

</details>

<details>

<summary><h4>Страница «Лечение»</h4></summary>

    Кнопка «Назначить лечение»
    Вкладки: запланированные, текущие, завершенные
<h5>Список назначенных лекарств:</h5>

- название лекарства
- дата начала приема
- дата окончания приема (*уточнить, возможны ли точные даты*)
- инструкция по применению
    - тип лекарства (таблетки, суспензии\...)
    - способ приема (подкожно, внутримышечно, ректально\...)
    - доза (кол-во грамм, штук, капель\...)
    - длительность приема
    - периодичность приема
    - подтверждено пациентом


</details>

<details>

<summary><h4>Страница «Приемы пациента»</h4></summary>

    Кнопка «Назначить прием»
    Вкладки: новые, необработанные, история

<h5>Список новых приемов:</h5>

- дата приема
- тип приема

<h5>Необработанные приемы</h5>

- дата приема
- тип приема
- Кнопка **Внести данные о приеме**

<h5>История приемов</h5>

- дата приема
- тип приема
- список жалоб
- комментарий по жалобам
- ФИО врача, сделавшего прием *(для врачей-консультантов)*
- рекомендации
- Кнопка **«Просмотреть данные о приеме**»

<h5>Окно назначить прием</h5>

<h6>Форма назначения приема</h6>

- дата приема
- тип приема
- сообщение
- Кнопка **«Сохранить»**
- Кнопка **«Отмена»**

<h5>Окно внести данные о приеме</h5>

<h6>Форма внесения данных о приеме</h6>

- жалобы (множественный выбор из списка жалоб)
- комментарий по жалобам (текст)
- объективный статус (текст)
- терапия (текст)
- Кнопка **«Сохранить»**
- Кнопка **«Отмена»**

<h5>Окно просмотр данных о приеме</h5>

- дата приема
- тип приема
- ФИО врача, сделавшего прием *(для врачей-консультантов)*
- жалобы
- комментарий врача по жалобам
- объективный статус
- результаты ЭКГ
- результаты СМЭКГ
- результаты УЗИ сердца
- терапия
- дополнительная мед. документация
- рекомендации
- Кнопка **Изменить данные** *(уточнить необходимость)*

</details>

<details>

<summary><h4>Страница «Больницы»</h4></summary>

<h5>Список больниц</h5>

- город
- название больницы
>По нажатию на название больницы открывается страница «Больница»

</details>

<details>

<summary><h4>Страница «Больница»</h4></summary>

<h5>Информация о больнице:</h5>

- город
- название
- адрес
- полное наименование
- email
  <h5>Список пациентов:</h5>

- ФИО
- номер страховки
- дата рождения
- телефон
> По нажатию на ФИО открывается страница «История болезни».

</details>

</details>

<details>

<summary><h2>Карта сайта</h2></summary>

- Кабинет пациента
    - Главная
        - внесение веса
        - внесение роста
        - добавление фото
    - Назначения
        - новые
        - история
    - Уведомления
        - новые
        - история
    - Обследования
        - Липидный профиль
            - новые
                - внесение результатов
                    - фото
                    - вручную
            - история
        - Глюкоза
            - новые
                - внесение результатов
                    - фото
                    - вручную
            - история
        - МНО
            - новые
                - внесение результатов
                    - фото
                    - вручную
            - история
        - ОАК
            - новые
                - внесение результатов
                    - фото
                    - вручную
        - Артериальное давление
            - новые
                - внесение результатов
            - история
        - Пульс
            - новые
                - внесение результатов
            - история
    - ЭКГ
        - новые
            - внесение результатов
        - история
    - Информация
        - список статей
        - просмотр статьи
- Кабинет врача
    - Пациенты
        - новые
        - история
        - необработанные
        - История болезни
            - внести личные данные
            - внести документальные данные
            - внести объективные данные
            - внести лабораторные данные
            - Обследования
                - новые
                - необработанные
                - запланированные
                - история
                - внести результаты
                    - фото
                    - вручную
            - Уведомления
                - добавить уведомление
            - Лечение
                - запланированные
                - текущие
                - завершенные
            - Приемы пациента
                - запланированные
                - история
                - назначить прием
                - внести данные о приеме
                - просмотр приема
            - Назначить лечение
                - добавить лекарство
                - добавить обследование
    - Больницы
        - Больница

</details>

<h2>Архитектура проекта</h2>

<details>

  <summary><h3>Локации</h3></summary>

-- -
>Страна
-- -
**country**

| row\_name | type | обязательность | описание |
| ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ страны |
| name | string (30) | yes | Название страны |
| shortcode | string(4) | yes | Код страны в формате ISO |
| enabled | boolean | yes | Ограничение использования |
 -- -
>Регион
 -- -
**region**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ региона |
| country\_id | integer (key) | yes | Ключ страны |
| name | string (50) | yes | Название региона |
| region\_number | string (8) | yes | Номер региона |
| enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
>Город
 -- -
**city**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ города |
| region\_id | integer (key) | yes | Ключ региона |
| name | string (50) | yes | Название города |
| enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
>*Страны, регионы, города - на основе справочника ОКТМО*
-- -
>Больница
 -- -
**hospital**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ больницы |
| region\_id | integer (key) | yes | Ключ региона |
| city\_id | integer (key) | yes | Ключ города |
| address | string (255) | no | Адрес больницы |
| name | string (50) | yes | Название больницы |
| phone | string (12) | yes | Телефон для отправки смс |
| email | string (50) | no | Email для связи с больницей |
| description | text | no | Описание или комментарий для больницы |
| Code | String(6) | No | Код больницы |
| enabled | boolean | yes (default - 1) | Ограничение использования |

>*На основе справочника ЛПУ ФФОМС*
 -- -

</details>

<details>

  <summary><h3>Пользователи</h3></summary>

-- -
>Роль
 -- -
**role**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ роли |
| name | string (50) | yes | Название роли |
| tech\_name | string (20) | no | Техническое название |
| description | text | no | Описание роли |
 -- -

Роли пользователей:
> ROLE\_ADMIN --- Администратор сайта
>
> ROLE\_MANAGER --- Менеджер панели администрирования
>
> ROLE\_DOCTOR\_CONSULTANT --- врач-консультант (доступ ко всем
> больницам)
>
> ROLE\_DOCTOR\_HOSPITAL --- врач больницы
>
> ROLE\_PATIENT --- пациент

 -- -
> Пользователь
 -- -
**auth\_user**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ пользователя |
| phone | string (10) | yes | Телефон пользователя |
| email | string (180) | no | Email пользователя |
| roles | json | yes | Роли пользователя |
| password | string(255) | yes | Пароль |
| firstName | string(30) | yes | Имя пользователя |
| lastName | string(100) | yes | Фамилия пользователя |
| patronymicName | string(50) | no | Отчество пользователя |
| enabled | boolean | yes | Ограничение использования |
 -- -
> Пациент
 -- -
**patient**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ пациента |
| auth\_user\_id | integer (key) | yes | Ключ пользователя |
| hospital\_id | integer (key) | yes | Ключ больницы |
| address | date | yes | Адрес проживания |
| smsInforming | boolean | yes | Оповещение через смс |
| emailInforming | boolean | yes | Оповещение через email |
| heart\_attack\_date | date | no | Дата возникновения инфаркта |
| snils | string (20) unique | no | СНИЛС пациента |
| insuranceNumber | string(50) unique | no | Номер страховки |
| passport | string(255) unique | no | Серия и номер паспорта |
| passport\_issue\_date | date | no | Дата выдачи паспорта |
| passport\_issuing\_authority | string(255) | no | Орган, выдавший паспорт |
| passport\_issuing\_authority_code | string(10) | no | Код органа, выдавшего паспорт |
| weight | integer | no | Вес |
| height | integer | no | Рост |
| date\_birth | Date | Yes | Дата рождения |
| district_id | integer (foreign key) | no | Район |
| city_id | integer (foreign key) | no | Город |

 -- -
> Врач
 -- -
**staff**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ персонала |
| auth\_user\_id | integer (key) | yes | Ключ пользователя |
| hospital\_id | integer (key) | yes | Ключ больницы |
| position\_id | integer (key) | yes | Ключ должности |
-- -
> Должность
 -- -
**position**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ должности |
| name | string (50) | yes | Название должности |
| enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
> Пол

 -- -
**gender**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ пола |
| name | string (1) | yes | Название пола |
 -- -

> Файлы пациента

 -- -
**patient_file**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ файла пациента |
| patient_id | integer (key) | yes | Код пациента |
| fileName |  string(255) | yes | Наименование файла |
| uploaded | datetime | yes | Дата и время загрузки |
 -- -

</details>

<details>

<summary><h3>Медицинские справочники</h3></summary>

 -- -
>Диагноз
 -- -
**diagnosis**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| name | string (100) | yes | Имя диагноза |
| code | string (50) | yes | Код диагноза |
| parentCode | string (50) | no | Код группы диагнозов |
| enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
>Вид приема пациента
 -- -
**appointment_type**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| name | string (255) | yes | Наименование вида приема |
| enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
> Группа анализов
 -- -
**analysis\_group**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| name | string (50) | yes | Название группы анализов |
| full\_name | string (255) | no | Полное название группы анализов |
| enabled | boolean | yes (default - true) | Ограничение использования |

Группы анализов:
> Артериальное давление (АД)
> Липидный профиль
> Глюкоза
> МНО
> Общий анализ крови (ОАК)
> ЭКГ
> СМЭКГ
> Натрийуретический пептид
> ЧСС
> Креатинин
> Мочевина
> АСТ (Биохимический анализ крови)
> АЛТ

 -- -
> Анализ
 -- -
**analysis**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| name | string (50) | yes | Название анализа |
| description | string (255) | no | Описание анализа |
| analysis\_group\_id | integer (key) | yes | Ключ группы анализов |
| enabled | boolean | yes (default - false) | Ограничение использования |
 -- -
>Единица измерения
 -- -
**measure**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| name\_en | string (10) | no | Название единицы измерения (en) |
| name\_ru | String (10) | yes | Название единицы измерения (ru) |
| title | string(100) | No | Расшифровка единицы измерения |
| enabled | boolean | yes (default - true) | Ограничение использования |
 -- -
>Референтные значения
 -- -
**analysis\_rate**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| rate\_min | float | yes | Минимальное значение |
| rate\_max | float | yes | Максимальное значение |
| analysis\_id | integer | yes | Ключ анализа |
| gender\_id | Integer | Yes | Ключ пола |
| measure\_id | Integer | Yes | Ключ меры длины |
| enabled | boolean | yes (default - true) | Ограничение использования |
 -- -
>График обследований
 -- -
**plan\_testing**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| analysis\_group\_id | integer | yes | Ключ группы анализов |
| time\_range\_id | integer (foreign key) | yes | Временной диапазон |
| time\_range\_count | integer | yes | Срок выполнения |
| enabled | boolean | yes (default - false) | Ограничение использования |
-- -
>График приемов
-- -
**plan\_appointment**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| time\_range\_id | integer (foreign key) | yes | Временной диапазон |
| time\_range\_count | integer | yes | Срок выполнения |
| enabled | boolean | yes (default - false) | Ограничение использования |
-- -
>Интервал
-- -
**date_interval**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ интервала |
| name | string (30) | yes | Название интервала |
| title | string (30) | no | Заголовок интервала |
| format | string (1) | yes | Формат интервала |
-- -
>Временной диапазон
-- -
**time\_range**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ временного диапазона |
| title | string (30) | no | Заголовок временного диапазона |
| multiplier | integer | yes (default=1) | Множитель |
| date\_interval\_id| integer (foreign key) | yes | Код интервала |
| is_regular | boolean | yes (default - false) | Регулярный |
| enabled | boolean | yes (default - true) | Ограничение использования |
-- -
>Тип шаблона
-- -
**template_type**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ типа шаблона |
| name | string (255) | yes | Название шаблона |
| enabled | boolean | yes (default - true) | Ограничение использования |
-- -
>Параметр шаблона
-- -
**template_parameter**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ параметра типа шаблона |
| name | string (255) | yes | Название параметра типа шаблона |
| template\_type\_id | Integer (ManyToOne template_type) | yes | Ключ типа шаблона |
| enabled | boolean | yes (default - true) | Ограничение использования |
-- -
>Шаблон
-- -
**template**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ шаблона |
| name | string (255) | yes | Название шаблона |
| template\_type\_id | integer (foreign key) | yes | Тип шаблона |
| template\_parameter\_texts | ManyToMany (template\_parameter\_text) | yes | Тексты параметров шаблона |
| enabled | boolean | yes (default - true) | Ограничение использования |

> Требуется проверка на соответствие параметров шаблона типу выбранного шаблона

-- -
>Текст параметра
-- -
**template_parameter_text**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ параметра шаблона |
| template\_parameter\_id | integer (ManyToOne template_parameter) | yes | Название параметра |
| text | text | yes | Текст параметра шаблона |
| enabled | boolean | yes (default - true) | Ограничение использования |

-- -
>Текст по шаблону
-- -
**text_by_template**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ текста шаблона |
| template\_type\_id | integer | yes | Ключ типа шаблона |
| text | text | no | Оригинальный текст по шаблону |
| template\_id | integer (foreign key) | no | Ключ шаблона |
-- -

> В админке для добавления нового типа шаблонов:
>
> - добавить тип шаблона в соответствии с темой текста (анамнез жизни, анамнез заболевания)
> - добавить параметры, принадлежащие данному типу шаблона
> - добавить любое количество текстов для каждого параметра

> В админке для добавления нового шаблона:
> - выбрать тип шаблона
> - для каждого параметра, принадлежащего типу шаблона, выбрать текст

> В кабинете врача для заполнения поля, соответствующего типу шаблона:

> **либо** выбрать из списка готовых шаблонов (демонстрация сформированных текстов)
>
> В результате формируется текст на основе параметров выбранного шаблона

> **либо** подготовить собственный шаблон (конструктор текста по параметрам):
>
> В результате формируется текст на основе выбранных параметров

>Лекарство
 -- -
**medecine**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ препарата |
| name | string (50) | yes | Название препарата |
| description | text | yes | Описание использования |
| enabled | integer (1) (boolean) | yes (default - 1) | Ограничение использования |
 -- -
> Способ приема
 -- -
**reception\_method**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ способа приема |
| name | string(100) | yes | Название способа приема |
| enabled | boolean | yes | Ограничение использования |
 -- -
> Жалоба
-- -
**complaint**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ способа приема |
| name | string(255) | yes | Название жалобы |
| description | text | yes | Описание жалобы |
| enabled | boolean | yes | Ограничение использования |
-- -

</details>

<details>

  <summary><h3>История болезни</h3></summary>  

 -- -

> История болезни
 -- -
**medical\_history**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| patient\_id | integer (key) | yes | Ключ пациента |
| date\_begin | date | yes | Дата открытия |
| date\_end | date | no | Дата закрытия |
| main\_disease | Integer (foreign key: diagnosis\_id) | Yes | Основное заболевание |
| background\_diseases | ManyToMany (diagnosis\_ids) | no | Фоновые заболевания |
| complications | ManyToMany (diagnosis\_ids) | no | Осложнения основного заболевания |
| concomitant\_diseases | ManyToMany (diagnosis\_ids) | no | Сопутствующие заболевания |
| disease\_history | Integer(text\_by\_template OneToOne) | no | Анамнез заболевания |
| life\_history | Integer(text\_by\_template OneToOne) | no | Анамнез жизни |
| Enabled | Boolean | Yes | Ограничение использования |

> При добавлении истории болезни
>
>- вносятся данные первого приема, где доп. документами будут выписные эпикризы пациента
>- вносятся результаты обследований на момент включения (давность не более 3-х месяцев)
>- добавляются обследования и пустые результаты в соответствии со стандартным планом обследований
>- добавляются приемы в соответствии со стандартным планом приемов
 -- -
>Запись в историю болезни
 -- -
**medical\_record**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| **medical\_history\_id** | integer (key) | yes | Ключ истории болезни |
| record\_date | date | yes | Дата записи |
| comment | text | no | Комментарий |
| enabled | boolean | yes | Ограничение использования |
>для одной даты может быть только одна запись в данную историю болезни
 -- -
> Назначение
 -- -
**prescription**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ назначения |
| **medical\_history\_id** | integer (key) | yes | Ключ истории болезни |
| **medical\_record\_id** | integer (key) | no | Ключ записи в историю болезни |
| is\_completed | Bool | yes(false) | Назначено |
| is\_patient\_confirmed | Boolean | yes | Подтверждение назначения пациентом |
| staff\_id | Integer | Yes | Ключ врача, сделавшего назначение |
| description | text | no | Описание назначения |
| created\_time | Datetime | Yes | Дата и время создания назначения |
| completed\_time | Datetime | No | Дата и время факта назначения |
| enabled | boolean | yes | Ограничение использования |

> В назначение входят назначение лекарств, назначение обследований. Назначение попадает в запись истории болезни только после того как врач отметит его как назначенное.
 -- -
> Обследование пациентов
 -- -
**patient\_testing**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ записи |
| medical\_history\_id | Integer (key) | yes | Ключ истории болезни |
| analysis\_group\_id | Integer (key) | yes | Ключ группы анализов |
| date\_begin | date | yes | Планируемая дата начала сдачи анализа |
| date\_end | Date | no | Планируемая дата окончания сдачи анализа |
| actual\_date | date | no | Фактическая дата сдачи анализа |
| processed | boolean | Yes | Статус принятия в работу врачом |
| medical\_record\_id | Integer | No | Ключ записи в истории болезни |
| entering\_user | integer(key) (AuthUser) | No | Пользователь, вносивший результаты |
| is\_by\_plan | boolean | yes | Флаг по плану анализов |
| plan\_testing\_id | integer( reference\_key: plan\_testing) | no | Код плана обследований |
| enabled | boolean | yes (default - true) | Ограничение использования |
 -- -
> Назначение лекарства
 -- -
**prescription\_medicine**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ лекарства по назначению |
| prescription\_id | Integer (foreign key) | yes | Ключ назначения |
| medicine\_id | Integer (foreign key) | yes | Ключ лекарства |
| reception\_method\_id | integer | yes | Способ приема |
| instruction | text | yes | Инструкция по применению |
| staff\_id | integer(key) | Yes | Ключ врача, назначившего лекарство |
| inclusion\_time | Datetime | Yes | Дата и время включения лекарства в назначение |
| enabled | boolean | yes | Ограничение использования |
 -- -
> Результат анализа пациента
 -- -
**patient\_testing\_result**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ результата анализа |
| patient\_testing\_id | Integer (foreign key) | yes | Ключ обследования |
| analysis\_rate\_id | integer (foreign key) | yes | Ключ предельных нормальных значений анализа |
| analysis\_id | Integer (foreign key) | Yes | Ключ анализа |
| result | float | Yes | Результат анализа |
| enabled | boolean | yes (default - true) | Ограничение использования |
-- -
> Прием пациента
 -- -
**patient\_appointment**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ приема |
| medical\_record\_id | integer (foreign key) | no | Ключ записи в историю болезни |
| medical\_history\_id | Integer (foreign key) | Yes | Ключ истории болезни |
| staff\_id | integer (foreign key) | no | Ключ врача |
| recommendation | text | no | Рекомендации врача |
| complaints | ManyToMany (complaints_ids) | no | Жалобы |
| complaints_comment|Text|No|Комментарий врача по жалобам|
| objective\_status| Integer(text\_by\_template OneToOne) |No|Объективный статус|
| therapy|Integer(text\_by\_template OneToOne)| no |Терапия|
| appointment\_type\_id | Integer | no | Вид приема |
| appointment\_time | Datetime | no | Дата и время приема |
| planned\_time | datetime | yes | Дата и время приема по плану |
| is\_confirmed | Boolean | Yes | Флаг подтверждения пациентом |
| is\_by\_plan | boolean | yes | Флаг по плану приемов |
| plan\_appointment\_id | integer( reference\_key: plan\_testing) | no | Код плана приемов |
| enabled | boolean | yes | Ограничение использования |
 -- -
> Назначение обследования
 -- -
**prescription\_testing**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ назначения на обследование |
| prescription\_id | integer(foreign key) | yes | Ключ назначения |
| patient\_testing\_id | Integer (foreign key) | yes | Ключ обследования |
| staff\_id | Integer (foreign key) | Yes | Ключ врача, назначившего обследование |
| inclusion\_time | Datetime | Yes | Дата и время включения обследования в назначение |
| enabled | boolean | yes | Ограничение использования |

> Сделать назначения на прием обязательными для всех обследований, кроме первых

 -- -
> Назначение приема
 -- -
**prescription\_appointment**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ назначения на прием |
| prescription\_id | integer(foreign key) | yes | Ключ назначения |
| patient\_appointment\_id | Integer (foreign key) | yes | Ключ приема пациента |
| staff\_id | Integer (foreign key) | Yes | Ключ врача, назначившего прием |
| inclusion\_time | Datetime | Yes | Дата и время включения приема в назначение |
| enabled | boolean | yes | Ограничение использования |

> Сделать назначения на прием обязательными для всех приемов, кроме первых

 -- -
> Выписной эпикриз

-- -
**patient_discharge_epicrisis**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Код выписного эпикриза |
| medical\_history\_id | integer (key OneToOne) | yes | Код истории болезни |


-- -
> Скан выписного эпикриза

-- -
**discharge_epicrisis_file**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ способа приема |
| discharge\_epicrisis\_id | integer (key ManyToOne) | yes | Код выписного эпикриза |
| patient\_file\_id | integer (key OneToOne) | yes | Код файла |
 -- -
> Скан обследования

-- -
**patient_testing_file**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ способа приема |
| patient\_testing\_id | integer (key ManyToOne) | yes | Код обследования |
| patient\_file\_id | integer (key OneToOne) | yes | Код файла |
 -- -

 -- -
> Скан выписного эпикриза

-- -
**discharge_epicrisis_file**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ способа приема |
| discharge\_epicrisis\_id | integer (key ManyToOne) | yes | Код выписного эпикриза |
| patient\_file\_id | integer (key OneToOne) | yes | Код файла |
 -- -


</details>

<details>

  <summary><h3>Прочие справочники</h3></summary>

 -- -
>Справочник ЛПУ (ФФОМС)
 -- -
**lpu**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| Id | integer (primary) | yes | Ключ лекарства по назначению |
| oktmo\_region\_id | integer | no | Код ОКТМО региона |
| region\_name | string(100) | yes | Название региона |
| years | string(255) | Yes | Годы обновления в справочнике |
| code | string(6) | Yes | Код ЛПУ |
| full\_name | string(255) | no | Полное наименование ЛПУ |
| caption | string(255) | yes | Краткое наименование ЛПУ |
| OKOPF | string(5) | yes | Код ОКОПФ |
| postCode | string(6) | No | Почтовый индекс |
| address | string(255) | yes | Адрес |
| directorLastName | string(50) | Yes | Фамилия руководителя |
| directorFirstName | string(50) | Yes | Имя руководителя |
| directorPatronymicName | string(50) | No | Отчество руководителя |
| phone | string(50) | No | Телефон |
| fax | String(50) | No | Факс |
| Email | String(100) | No | Email |
| license | String(50) | No | Номер лицензии |
| LicenseDate | Date | No | Дата лицензии |
| licenseDateEnd | Date | no | Дата завершения срока лицензии |
| medicalCareTypes | string(255) | No | Виды медицинской помощи |
| includeDate | Date | Yes | Дата включения в реестр |
 -- -
>ОКСМ
 -- -
**oksm**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ должности |
| A2 | string (2) | yes | Двузначный код страны |
| A3 | String (3) | yes | Трехзначный код страны |
| N3 | integer | Yes | Числовой код страны |
| caption | String (255) | Yes | Название страны |
-- -
>ОКТМО
 -- -
**oktmo**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes |
| kod | integer | yes |
| Kod2 | integer | yes |
| subKod1 | integer | Yes |
| subKod2 | integer | Yes |
| subKod3 | integer | yes |
| subKod4 | integer | yes |
| p1 | integer | yes |
| p2 | integer | yes |
| kch | integer | Yes |
| name | String (300) | Yes |
| name2 | String (300) | yes |
| notes | String (255) | yes |
| federalDistrictId | integer | yes |
| federalDistrictName | String (255) | yes |
| regionId | integer | yes |
| regionName | string(255) | yes |
| settlementTypeId | integer | yes |
| settlementTypeName | string(255) | yes |
 -- -

 </details>

 <details>

  <summary><h3>Логирование дейстивий</h3></summary>

 -- -
>Типы логов
 -- -
**log_action**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ типа лога |
| name | string (255) | yes | Название типа лога |
| log | OneToMany(Log) | yes | Привязка к сущности Log |
| enabled | bool | yes | Статус логирования (вкл/выкл) |
 -- -
>Лог
 -- -
**log**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ лога |
| description | text | yes | Описание лога |
| userString | String (255) | yes | Строка с информацией о пользователе |
| action | ManyToOne (LogAction) | yes | Привязка к сущности LogAction |
| created_at | datetime | yes | Дата и время создания |
-- -

 </details>

  <details>

  <summary><h3>Уведомления</h3></summary>

 -- -
>Уведомление
 -- -
**notification**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ уведомления |
| notificationReceiverType | ManyToOne (NotificationReceiverType) | yes | Привязка к сущности NotificationReceiverType |
| patientNotification | OneToOne (PatientNotification) | no | Привязка к сущности PatientNotification |
| staffNotification | OneToOne (StaffNotification) | no | Привязка к сущности StaffNotification |
| authUserSender | ManyToOne (AuthUser) | yes | Привязка к сущности AuthUser |
| channelType | ManyToOne (ChannelType) | yes | Привязка к сущности ChannelType |
| notificationTime | datetime | yes | Дата и время создания |
| text | text | yes | Текст уведомления |
| notificationTemplate | ManyToOne (NotificationTemplate) | yes | Привязка к сущности NotificationTemplate |
| smsNotification | OneToOne (SMSNotification) | yes | Привязка к сущности SMSNotification |
| emailNotification | OneToOne (EmailNotification) | yes | Привязка к сущности EmailNotification |
| webNotification | OneToOne (WebNotification) | yes | Привязка к сущности WebNotification |
 -- -
>Уведомление пациента
 -- -
**patientNotification**

| row\_name | type | обязательность | описание пациента |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ уведомления |
| notification | OneToOne (Notification) | yes | Привязка к сущности Notification |
| patient | ManyToOne (Patient) | yes | Привязка к сущности Patient |
| medicalRecord | ManyToOne (MedicalRecord) | no | Привязка к сущности MedicalRecord |
| medicalHistory | ManyToOne (MedicalHistory) | no | Привязка к сущности MedicalHistory |
 -- -
>Тип получателя уведомления
 -- -
**notificationReceiverType**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ типа получателя уведомления |
| notification | OneToMany (Notification) | yes | Привязка к сущности Notification |
| name | string (255) | yes | Привязка к сущности Patient |
 -- -
>Шаблон уведомления
 -- -
**notificationTemplate**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ шаблона уведомления |
| notification | OneToMany (Notification) | yes | Привязка к сущности Notification |
| notificationReceiverType | ManyToOne (NotificationReceiverType) | yes | Привязка к сущности NotificationReceiverType |
| name | string (255) | yes | Название шаблона уведомления |
| text | text | yes | Текст шаблона уведомления |
 -- -
>Тип канала
 -- -
**channelType**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ типа канала |
| notification | OneToMany (Notification) | yes | Привязка к сущности Notification |
| name | string (255) | yes | Название типа канала |
| smsNotification | OneToMany (SMSNotification) | no | Привязка к сущности SMSNotification |
| emailNotification | OneToMany (EmailNotification) | no | Привязка к сущности EmailNotification |
| webNotification | OneToMany (WebNotification) | no | Привязка к сущности WebNotification |
 -- -
>SMS Уведомления
 -- -
**smsNotification**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ sms уведомления |
| externalId | string (255) | yes | ID sms сообщения на стороне провайдера |
| smsTo | string (255) | yes | Телефон получателя sms сообщения |
| status | string (255) | yes | Статус доставки sms сообщения |
| attempt | integer | yes | Кол-во попыток отправки сообщения |
| notification | OneToOne (Notification) | yes | Привязка к сущности Notification |
| channelType | ManyToOne (ChannelType) | yes | Привязка к сущности ChannelType |
-- -
>Email Уведомления
 -- -
**emailNotification**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ email уведомления |
| emailTo | string (255) | yes | Email получателя |
| notification | OneToOne (Notification) | yes | Привязка к сущности Notification |
| channelType | ManyToOne (ChannelType) | yes | Привязка к сущности ChannelType |
-- -
>Web Уведомления
 -- -
**webNotification**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ web уведомления |
| receiverString | string (255) | yes | Строка получателя |
| notification | OneToOne (Notification) | yes | Привязка к сущности Notification |
| channelType | ManyToOne (ChannelType) | yes | Привязка к сущности ChannelType |
| isRead | bool | yes | Статус просмотра уведомления пользователем |
-- -

 </details>

   <details>

  <summary><h3>Получаемые данные от пациентов</h3></summary>

 -- -
>Полученные SMS
 -- -
**received_sms**

| row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ полученной sms |
| patient | ManyToOne (Patient) | yes | Привязка к сущности Patient |
| text | text | yes | Текст полученной sms |
| externalId | string (255) | yes | ID sms сообщения на стороне провайдера |
| created_at | datetime | yes | Дата и время отправки sms |
 -- -

 </details>
