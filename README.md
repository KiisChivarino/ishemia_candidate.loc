#Мониторинг больных с ИБС

##Информация о проекте

Требуется разработать систему мониторинга больных с ишемической болезнью сердца (хронической сердечной недостаточностью), а также с острым корональным синдромом. Проект должен учитывать как региональное разделещние так и возможное расширение по странам, что требуется заложить в архитектуре проекта. Допустим переход пациента с одного региона в другой, а также смена страны, с сохранением всей истории лечения.

###Основные разделы:
Приложение состоит из кабинета врача, кабинета пациента и панели администрирования.

###Мониторинг анализов
 Приложение производит мониторинг анализов пациентов:
   - план анализов для нового пациента
   - назначение анализов пациенту
   - предупреждение об этапах прохождения анализов
   - отчеты о превышении нормальных значений для анализов
   - уведомления врачу и пациенту о событиях проведения анализов

###Мониторинг приема лекарств:
 Приложение производит мониторинг лекарств, которые принимают пациенты:
   - назначение лекарств пациенту
   - информация о принимаемых пациентом лекарствах
   - уведомления врачу и пациенту о событиях приема лекарств
   
###Мониторинг приемов у врача:
 Приложение производит мониторинг приемов пациентов у врача:
   - уведомления врачу и пациенту о событиях приема у врача
   - информация о приеме у врача (о планируемом приеме, о результатах приема)
   
###История болезни:
Для каждого пациента создается история болезни, в которую записываются первоначальные данные о больном, назначения лекарств, назначения обследований, приемы у врача, а также уведомления.

###Хранимые данные:
Приложение хранит информацию со следующими данными:
  - врачи
  - пациенты
  - локации (страна, регионы, районы, города, больницы)
  - анализы (группы анализов, анализы, предельные нормальные значения анализов)
  - лекарства
  - диагнозы
  - истории болезни
  - анализы пациентов (план анализов для пациента, назначенные анализы пациента, результаты анализов пациента)
  - назначения (назначение лекарств, назначение анализов)
  - лекарства, принимаемые пациентами
  - приемы у врача
  - лог событий о действиях врачей и пациентов в системе
  - sms (шаблоны sms, переданные sms)
  - email (шаблоны email, переданные email)
###Информирование пациента
Информирование пациента должно проводиться через личный кабинет пациент, а также посредством email, sms (по выбору пациента).

###Отчеты
Для удобства вывода информации требуется разработать единую систему формирования отчета (в графическом виде или текстовом в зависимости от запроса и особенностей отчета)
Т.е. необходимо использовать разные данные из разных таблиц предоставить простой интерфейс сборки отчета (пример: требуется вывести количество пациентов с параметром "тромбоциты". Выбрать таблицу дневников пациентов - выбрать параметр проекта, далее система должна сформировать отчет в json виде, который в дальнейшем может быть использован как к графическом так и в текстовом виде).

##Требования к техническому исполнению:

Для ядра проекта требуется использовать нативный язык php, версии 7.1 или выше (допустимо использовать небольшие библиотеки с полным комментированием кода), база данных - PostgreSQL, с обязательным резервированием всех данных. Средство общения ядра проекта с внешними средами только через api, формат общения - json. 

Защита должна быть выполнена через обязательную двухфакторную аутентификацию пользователей системы, а именно: связка логин и пароль, а также смс код для входа. 

Ядро проекта должно быть развернуто в операционной системе АльтЛинукс, для соответствия требованиям федерального законодательства в сфере защиты персональных данных.

Ядро системы должны быть модульным и стиль написания кода должен подразумевать объектно ориентированный. Требуется максимальная возможная независимость модулей проекта для последующего расширения проекта и введения дополнительного функционала. Каждый модуль (класс) должен быть описан комментариями.

Ядро проекта должны быть закрыто SSL сертификатом, а общение должно происходить по протоколу https.

##Структура сайта

###Страницы кабинета пациента

####Общие элементы

#####Шапка сайта:
  - название страницы
  - кнопки (опционально)

#####Боковая панель (сверху вниз):
  - заголовок проекта со ссылкой на главную страницу
  - фото пациента: при нажатии открывается модальное окно замены фото
  - ФИО пациента
  - Пункты меню:
    - главная
    - артериальное давление (выделить)
    - пульс (выделить)
    - назначения лекарств
    - уведомления
    - обследования
      - липидный профиль
      - глюкоза
      - ЭКГ
      - МНО
      - ОАК
    - информация
    - чат (в перспективе)
    - кнопка «Выход»

####Главная станица

#####Шапка сайта:
  - в названии ФИО пациента
  - кнопка «заявка на прием»
  
#####Контент:
  - блок назначений
  - блок уведомлений
  - ######Блоки-ссылки на внесение анализов:
    - блок **«на внесение артериального давления»**
    - блок **«на внесение пульса»**
    - блок «вес (с индексом массы тела)»
  - блок календарь анализов и приемов
  - блок «анонсы статей»
  - Кнопка «Получить историю болезни»

####Страница «Назначения»:
    Вкладки: новые, история
  - ######Список назначений (одно назначение - одна строка)
    В назначении:
    - дата,
    - лекарства: способ приема, время приема
    - анализы: название группы анализов, время сдачи
    - информация о враче, выписавшем назначение

####Страница «Уведомления»:
    Вкладки: новые, история

#####Список (для всех вкладок):
  - тип уведомления
  - текст уведомления

####Страница обследования (аналогично для каждого подпункта):
    Вкладки: новые, история
#####Вкладка «Новые»:
######Список:
  - дата сдачи
  - Кнопка «Внести результаты»
#####Вкладка «История»:
  - Список:
    - дата 
    - параметр 1, параметр2...
  - График *(в перспективе)*

#####Окно «Внесение результатов»:
    Вкладки: Фото, Вручную
  - Дата проведения (выбор даты)
  
  ######Вкладка «Фото»:
- --
  - кнопка «Добавить фото»
  - фотография результатов
- --  
  ######Вкладка «Вручную»:
- --    
  Форма внесения результатов анализов:
    
  - результат (ввод значения)
  - выбор референтного значения
- --
  - Кнопка «Сохранить»
  - Кнопка «Отмена»
> *Для глюкозы, артериального давления, пульса добавление результатов только вручную.*

####Страница «ЭКГ»
  - Список:
    - дата
    - фото ЭКГ
    - описание (результаты, вывод)
> *Структуру страницы ЭКГ уточнить*

####Страница «Информация»:
  - список статей
  - статья в модальном окне

> **Все страницы кабинета пациента должны быть адаптированы для мобильных
версий.**

###Страницы кабинета врача:

####Общие элементы:

#####Шапка:
  - Заголовок проекта (со ссылкой на главную)
  - Верхнее меню
  - Поиск по пациенту
  - ФИО врача
  - Должность врача
  - Аватар врача
  - Кнопка «выйти»
#####Боковая панель:
  - Меню:
    - пациенты
    - больницы

####Страница «Пациенты»:
  - Кнопка «Новый пациент» (*уточнить, может ли врач добавлять пациента*)
  
  
    Вкладки: Фото, Вручную
- --
  Пациенты распределяются по вкладкам в зависимости от текущего состояния их обследований:
  - подошел срок обследования (пациенту отправлено уведомление), но результаты еще не переданы - во вкладке «новые»
  - результаты обследования переданы, но не обработаны врачом - во вкладке «необработанные»
  - результаты переданы и обработаны - во вкладке «история»
  - --
#####Таблица пациентов:
  - ФИО
  - возраст
  - диагноз
  - район
  - комментарий
  - последние показатели (причина цвета)

>При нажатии на ФИО пациента переход на страницу история болезни

####Страница «История болезни»

#####В верхнем меню ссылки:
  - обследования
  - уведомления
  - лечение
  - приемы пациента

#####Информация о пациенте:

######Личные данные:
    Кнопка "Внести личные данные"
  - ФИО (строка)
  - Возраст (число)
  - Адрес (строка)
  - Полис (строка)
  - СНИЛС (строка)
  - Паспортные данные (2 строки: серия-номер, кем и когда выдан)
  - телефон (строка)
  - email (строка)
  - Включенные оповещения (строка)
  - вес (число)
  - рост (число)
  - больница, к которой прикреплен (строка)
  
######Документальные данные:
    Кнопка "Внести документальные данные"
  - основное заболевание (строка)
  - фоновые заболевания (список)
  - осложнения основного заболевания (список)
  - сопутствующие заболевания (список)
  - анамнез заболевания (текст)
  - анамнез жизни (текст)
  
######Объективные данные:
    Кнопка "Внести объективные данные"
  - жалобы на момент включения в систему (список + текст: комментарий врача)
  - объективный статус на момент включения (текст)
  - получаемая терапия на момент включения (текст)
  
 ######Лабораторные данные:
    Кнопка "Добавить результаты обследований"
    Кнопка "Добавить выписные эпикризы"
  - Выписные эпикризы *(скан выписки из ЛПУ, где находился по поводу основного заболевания за последние 6 месяцев)*
  - Результаты обследований на момент включения *(давность не более 3 месяцев)*. Сканы документов.

#####Окно Внести личные данные
######Форма внесения личных данных
  - Фамилия
  - Имя
  - Отчество
  - Дата рождения
  - Адрес (строка)
  - Номер полиса (строка)
  - СНИЛС (строка)
  - Серия и номер паспорта
  - Дата выдачи
  - Кем выдан
  - Номер подразделения
  - телефон (строка)
  - email (строка)
  - Оповещать по СМС
  - Оповещать по Email
  - вес (число)
  - рост (число)
  - больница, к которой прикреплен (строка)
  - Кнопка **«Внести»**
  - Кнопка **«Отменить»**
  
#####Окно Внести документальные данные
######Форма внесения документальных данных
  - основное заболевание (строка)
  - фоновые заболевания (список)
  - осложнения основного заболевания (список)
  - сопутствующие заболевания (список)
  - анамнез заболевания (текст)
  - анамнез жизни (текст)
  - Кнопка **«Внести»**
  - Кнопка **«Отменить»**
  
#####Окно Внести объективные данные
######Форма внесения объективных данных
  - выбор жалоб *(множественный выбор)*
  - комментарий врача по жалобам
  - объективный статус на момент включения (текст)
  - получаемая терапия на момент включения (текст)
  - Кнопка **«Внести»**
  - Кнопка **«Отменить»**
  
######Окно Добавить выписные эпикризы
  - Кнопка **"Фото скана выписки из ЛПУ"**
  - Кнопка **«Добавить»**
  - Кнопка **«Отменить»**
  
#####Окно Добавить результаты обследований
######Форма добавления результатов обследований
  - выбор группы анализов
   >После выбора группы анализов появляются формы добавления анализов этой группы  

######Форма добавления анализа
- --
   - Фотография результатов *(если есть)*
   - Дата проведения *(выбор даты)*
   - результат (ввод значения)
   - выбор референтного значения
- --   
  - Кнопка **«Сохранить»**
  - Кнопка **«Отмена»**

#####История болезни:
    Кнопка: «Назначить лечение»
    Кнопка: «Пригласить на прием»
    Фильтр по датам
######Таблица записей в историю болезни:
  - дата
  - результаты анализов
    - результаты анализа (группа анализов, анализ, дата сдачи, значение)
    - Кнопка **«Открыть фото»**
    - способ передачи результатов
    - кем переданы результаты
  - назначения обследований
    - название группы анализов
    - планируемая дата сдачи
    - ФИО врача, сделавшего назначение
  - назначения лекарств
     - название лекарства
     - инструкция по применению
       - тип лекарства (таблетки, суспензии\...)
       - способ приема (подкожно, внутримышечно, ректально\...)
       - доза (кол-во грамм, штук, капель\...)
       - длительность приема
       - периодичность приема
     - ФИО врача, сделавшего назначение
  - приемы пациентов
    - дата приема
    - тип приема
    - список жалоб
    - комментарий врача
    - ФИО врача, сделавшего прием
> *В перспективе графическое представление результатов анализов и приема лекарств*

####Страница «Назначить лечение»:

    Кнопка «Добавить лекарство»
    Кнопка «Добавить обследование»

#####Список добавленных лекарств:
  - название лекарства
  - инструкция по применению
    - тип лекарства (таблетки, суспензии\...)
    - способ приема (подкожно, внутримышечно, ректально\...)
    - доза (кол-во грамм, штук, капель\...)
    - длительность приема
    - периодичность приема
  - действия:
    - Кнопка **«Изменить»**
    - Кнопка **«Удалить»**

#####Список добавленных обследований:
  - планируемая дата проведения
  - название группы анализов
  - действия:
    - Кнопка **«Изменить»**
    - Кнопка **«Удалить»**
    
    Кнопка **«Отправить назначение пациенту»**
    
#####Окно «Добавить лекарство»
######Форма добавления лекарства:
  - выбор препарата (поиск)
  - инструкция по применению (выбор из шаблонов с последующим редактированием текста)
  - Кнопка **«Добавить»**
  - Кнопка **«Отменить»**
  
#####Окно «Добавить обследование»
######Форма добавления обследования:
  - планируемая дата проведения
  - название группы анализов
  - Кнопка **«Добавить»**
  - Кнопка **«Отменить»**
  
####Страница «Обследования»

    Кнопка «Назначить лечение»

  - Вкладки:
    - новые (пациенту отправлено уведомление, результаты не введены, фото не добавлено)
    - необработанные (результаты введены или фото добавлено, но не обработано врачом)
    - история (результаты введены, обработано врачом)
    - запланированные (пациенту еще не отправлено уведомление)
  - Фильтры:
    - по группам анализов
    - по дате проведения «от - до»

#####Список обследований «Новые»:
  - название группы анализов
  - дата начала проведения обследования
  - дата завершения проведения обследования
  - Кнопка **«Внести результаты анализов»**
  
#####Список обследований «Необработанные»:
  - название группы анализов
  - фактическая дата проведения обследования

По нажатию на группу анализов появляется список анализов и результатов:
  - название анализа
  - единица измерения
  - предельные нормальные значения
  - внесенное значение
  - Кнопка **«Открыть фото»**
  - Кнопка **«Внести результаты анализов»**

#####Список обследований «Запланированные»
  - название группы анализов
  - дата начала проведения обследования
  - дата завершения проведения обследования

#####Окно «Внесение результатов»:
  - Вкладка «Фото»
    - Фотография результатов *(если есть)*
    - Дата проведения *(выбор даты)*
  - Вкладка «Вручную»:
    ######Форма внесения результатов анализов
    - результат (ввод значения)
    - выбор референтного значения
  - Кнопка **«Сохранить»**
  - Кнопка **«Отмена»**
#####Список обследований «История»:
  - название группы анализов
  - фактическая дата проведения
  
    По нажатию на группу анализов появляется список анализов и результатов:
    - название анализа
    - единица измерения
    - предельные нормальные значения
    - внесенное значение
    - Кнопка **«Открыть фото»**
  - *График анализов (в перспективе)*
  - *Список принимаемых лекарств справа от графика (в перспективе)*

####Страница «Уведомления»
    Кнопка «Добавить уведомление»
#####Список уведомлений:
  - тип уведомления
  - отправивший врач
  - дата и время отправки
  - способы отправки
#####Окно «Добавить уведомление»
######Форма добавления уведомления:
  - выбор типа уведомления
  - выбор способов отправки (смс, email)
  - Кнопка **«Сохранить»**
  - Кнопка **«Отмена»**

####Страница «Лечение»

    Кнопка «Назначить лечение»
    Вкладки: запланированные, текущие, завершенные
#####Список назначенных лекарств:
  - название лекарства
  - дата начала приема
  - дата окончания приема (*уточнить, возможны ли точные даты*)
  - инструкция по применению
    - тип лекарства (таблетки, суспензии\...)
    - способ приема (подкожно, внутримышечно, ректально\...)
    - доза (кол-во грамм, штук, капель\...)
    - длительность приема
    - периодичность приема
    - подтверждено пациентом

####Страница «Приемы пациента»
    Кнопка «Назначить прием»
    Вкладки: новые, необработанные, история

#####Список новых приемов:
  - дата приема
  - тип приема

#####Необработанные приемы
  - дата приема
  - тип приема
  - Кнопка **Внести данные о приеме**

#####История приемов
  - дата приема
  - тип приема
  - список жалоб
  - комментарий по жалобам
  - ФИО врача, сделавшего прием *(для врачей-консультантов)*
  - рекомендации
  - Кнопка **«Просмотреть данные о приеме**»

#####Окно назначить прием
######Форма назначения приема
  - дата приема
  - тип приема
  - сообщение
  - Кнопка **«Сохранить»**
  - Кнопка **«Отмена»**

#####Окно внести данные о приеме
######Форма внесения данных о приеме
  - жалобы (множественный выбор из списка жалоб)
  - комментарий по жалобам (текст)
  - объективный статус (текст)
  - терапия (текст)
  - Кнопка **«Сохранить»**
  - Кнопка **«Отмена»**

#####Окно просмотр данных о приеме
  - дата приема
  - тип приема
  - ФИО врача, сделавшего прием *(для врачей-консультантов)*
  - жалобы
  - комментарий врача по жалобам
  - объективный статус
  - результаты ЭКГ
  - результаты СМЭКГ
  - результаты УЗИ сердца
  - терапия
  - дополнительная мед. документация
  - рекомендации
  - Кнопка **Изменить данные** *(уточнить необходимость)*
  
####Страница «Больницы»
#####Список больниц
  - город
  - название больницы
>По нажатию на название больницы открывается страница «Больница»

####Страница «Больница»
#####Информация о больнице:
  - город
  - название
  - адрес
  - полное наименование
  - email
#####Список пациентов:
  - ФИО
  - номер страховки
  - дата рождения
  - телефон
> По нажатию на ФИО открывается страница «История болезни».

##Карта сайта
  - Кабинет пациента
    - Главная
      - внесение веса
      - внесение роста
      - добавление фото
    - Назначения
      - новые
      - история
    - Уведомления 
      - новые
      - история
    - Обследования
      - Липидный профиль
        - новые
          - внесение результатов
            - фото
            - вручную
        - история
      - Глюкоза
        - новые
            - внесение результатов
              - фото
              - вручную
        - история
      - МНО
        - новые
          - внесение результатов
            - фото
            - вручную
        - история
      - ОАК
        - новые
          - внесение результатов
            - фото
            - вручную
      - Артериальное давление
        - новые
          - внесение результатов
        - история
      - Пульс
        - новые
          - внесение результатов
        - история
    - ЭКГ
      - новые
        - внесение результатов
      - история
    - Информация
      - список статей
      - просмотр статьи
  - Кабинет врача
    - Пациенты 
      - новые
      - история
      - необработанные
      - История болезни
        - внести личные данные
        - внести документальные данные
        - внести объективные данные
        - внести лабораторные данные
        - Обследования 
          - новые
          - необработанные
          - запланированные
          - история
          - внести результаты
            - фото
            - вручную
        - Уведомления
          - добавить уведомление
        - Лечение 
          - запланированные
          - текущие
          - завершенные
        - Приемы пациента
          - запланированные
          - история
          - назначить прием
          - внести данные о приеме
          - просмотр приема
        - Назначить лечение
          - добавить лекарство
          - добавить обследование
    - Больницы
      - Больница

##Архитектура проекта

###Локации
-- -
>Страна
-- -
 country 

| row\_name | type | обязательность | описание |
| ------ | ------ | ------ | ------ |
| id | integer (primary) | yes | Ключ страны |
| name | string (30) | yes | Название страны |
| shortcode | string(4) | yes | Код страны в формате ISO |
| enabled | boolean | yes | Ограничение использования |
 -- -
>Регион
 -- -
 region

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ региона |
 | country\_id | integer (key) | yes | Ключ страны |
 | name | string (50) | yes | Название региона |
 | region\_number | string (8) | yes | Номер региона |
 | enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
>Город
 -- -
 city

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ города |
 | region\_id | integer (key) | yes | Ключ региона |
 | name | string (50) | yes | Название города |
 | enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
*Страны, регионы, города - на основе справочника ОКТМО*
-- -
>Больница
 -- -
 hospital

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ больницы |
 | region\_id | integer (key) | yes | Ключ региона |
 | city\_id | integer (key) | yes | Ключ города |
 | address | string (255) | no | Адрес больницы |
 | name | string (50) | yes | Название больницы |
 | phone | string (12) | yes | Телефон для отправки смс |
 | email | string (50) | no | Email для связи с больницей |
 | description | text | no | Описание или комментарий для больницы |
 | Code | String(6) | No | Код больницы |
 | enabled | boolean | yes (default - 1) | Ограничение использования |
 *На основе справочника ЛПУ ФФОМС*
 -- -

###Пользователи
-- -
>Роль
 -- -
 role

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ роли |
 | name | string (50) | yes | Название роли |
 | tech\_name | string (20) | no | Техническое название |
 | description | text | no | Описание роли |
 -- -

Роли пользователей:
> ROLE\_ADMIN --- Администратор сайта
>
> ROLE\_MANAGER --- Менеджер панели администрирования
>
> ROLE\_DOCTOR\_CONSULTANT --- врач-консультант (доступ ко всем
> больницам)
>
> ROLE\_DOCTOR\_HOSPITAL --- врач больницы
>
> ROLE\_PATIENT --- пациент

 -- -
> Пользователь
 -- -
 **auth\_user**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ пользователя |
 | phone | string (10) | yes | Телефон пользователя |
 | email | string (180) | no | Email пользователя |
 | roles | json | yes | Роли пользователя |
 | password | string(256) | yes | Пароль |
 | firstName | string(30) | yes | Имя пользователя |
 | lastName | string(100) | yes | Фамилия пользователя |
 | patronymicName | string(50) | no | Отчество пользователя |
 | enabled | boolean | yes | Ограничение использования |
 -- -
> Пациент
 -- -
 **patient**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ пациента |
 | auth\_user\_id | integer (key) | yes | Ключ пользователя |
 | hospital\_id | integer (key) | yes | Ключ больницы |
 | address | date | yes | Адрес проживания |
 | smsInforming | boolean | yes | Оповещение через смс |
 | emailInforming | boolean | yes | Оповещение через email |
 | diagnosis | ManyToMany | yes | Диагнозы |
 | snils | string (20) unique | no | СНИЛС пациента |
 | insuranceNumber | string(50) unique | no | Номер страховки |
 | passport | string(256) unique | no | Серия и номер паспорта |
 | passport\_issue\_date | date | no | Дата выдачи паспорта |
 | passport\_issuing\_authority | string(256) | no | Орган, выдавший паспорт |
 | passport\_issuing\_authority_code | string(10) | no | Код органа, выдавшего паспорт |
 | weight | integer | no | Вес |
 | height | integer | no | Рост |
 | date\_birth | Date | Yes | Дата рождения |
 | enabled | boolean | yes | Ограничение использования |
 -- -
> Врач
 -- -
 **staff**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ персонала |
 | auth\_user\_id | integer (key) | yes | Ключ пользователя |
 | hospital\_id | integer (key) | yes | Ключ больницы |
 | position\_id | integer (key) | yes | Ключ должности |
-- -
###Медицинские справочники
 -- -
>Диагноз
 -- -
 **diagnosis**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | name | string (100) | yes | Имя диагноза |
 | code | string (50) | yes | Код диагноза |
 | parentCode | string (50) | no | Код группы диагнозов |
 | enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
>Вид приема пациента
 -- -
 **appointment_type**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | name | string (255) | yes | Наименование вида приема |
 | enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
> Группа анализов
 -- -
 **analysis\_group**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | name | string (50) | yes | Название группы анализов |
 | full\_name | string (255) | no | Полное название группы анализов |
 | enabled | boolean | yes (default - true) | Ограничение использования |
 -- -
> Анализ
 -- -
 **analysis**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | name | string (50) | yes | Название анализа |
 | description | string (255) | no | Описание анализа |
 | analysis\_group\_id | integer (key) | yes | Ключ группы анализов |
 | enabled | boolean | yes (default - false) | Ограничение использования |
 -- -
>Единица измерения
 -- -
 **measure**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | name\_en | string (10) | no | Название единицы измерения (en) |
 | name\_ru | String (10) | yes | Название единицы измерения (ru) |
 | title | string(100) | No | Расшифровка единицы измерения |
 | enabled | boolean | yes (default - true) | Ограничение использования |
 -- -
>Референтные значения
 -- -
 **analysis\_rate**
 
 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | rate\_min | float | yes | Минимальное значение |
 | rate\_max | float | yes | Максимальное значение |
 | analysis\_id | integer | yes | Ключ анализа |
 | period\_id | Integer | Yes | Ключ периода |
 | measure\_id | Integer | Yes | Ключ меры длины |
 | enabled | boolean | yes (default - true) | Ограничение использования |
 -- -
>График обследований
 -- -
 **plan\_testing**
 
 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | analysis\_group\_id | integer | yes | Ключ группы анализов |
 | date\_begin | date | yes | Дата начала обследования |
 | date\_end | date | no | Дата завершения обследования |
 | enabled | boolean | yes (default - false) | Ограничение использования |

*Уточнить стандартный график сдачи анализов*
-- -
>График приемов
-- -
**plan\_appointment**
 
 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | date\_begin | date | yes | Дата начала приема |
 | date\_end | date | no | Дата завершения приема |
 | enabled | boolean | yes (default - false) | Ограничение использования |
-- -
>Лекарство
 -- -
 **medecine**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ препарата |
 | name | string (50) | yes | Название препарата |
 | description | text | yes | Описание использования |
 | enabled | integer (1) (boolean) | yes (default - 1) | Ограничение использования |
 -- -
> Способ приема
 -- -
 **reception\_method**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | Id | integer (primary) | yes | Ключ способа приема |
 | name | string(100) | yes | Название способа приема |
 | enabled | boolean | yes | Ограничение использования |
 -- -
> Жалоба
-- -
**complaint**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | Id | integer (primary) | yes | Ключ способа приема |
 | name | string(255) | yes | Название жалобы |
 | description | text | yes | Описание жалобы |
 | enabled | boolean | yes | Ограничение использования |
-- -
  
###История болезни
-- -
>История болезни
 -- -
 **medical\_history**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | patient\_id | integer (key) | yes | Ключ пациента |
 | staff\_id | integer (key) | No | Ключ ответственного врача |
 | date\_begin | date | yes | Дата открытия |
 | date\_end | date | no | Дата закрытия |
 | main_disease | Integer (foreign key: diagnosis_id) | Yes | Основное заболевание |
 | background_diseases | ManyToMany (diagnosis_ids) | no | Фоновые заболевания |
 | complications | ManyToMany (diagnosis_ids) | no | Осложнения основного заболевания |
 | concomitant_diseases | ManyToMany (diagnosis_ids) | no | Сопутствующие заболевания |
 | disease_history | Text | no | Анамнез заболевания |
 | life_history | Text | no | Анамнез жизни |
 | Enabled | Boolean | Yes | Ограничение использования |
 >При добавлении истории болезни 
 > 
 >- вносятся данные первого приема, где доп. документами будут выписные эпикризы пациента
 >- вносятся результаты обследований на момент включения (давность не более 3-х месяцев)
 >- добавляются обследования и пустые результаты в соответствии со стандартным планом обследований
 >- добавляются приемы в соответствии со стандартным планом приемов
 -- -
>Запись в историю болезни
 -- -
 **medical\_record**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | **medical\_history\_id** | integer (key) | yes | Ключ истории болезни |
 | record\_date | date | yes | Дата записи |
 | comment | text | no | Комментарий |
 | enabled | boolean | yes | Ограничение использования |
 >для одной даты может быть только одна запись в данную историю болезни
 -- -
> Назначение
 -- -
 **prescription**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ назначения |
 | **medical\_history\_id** | integer (key) | yes | Ключ истории болезни |
 | **medical\_record\_id** | integer (key) | no | Ключ записи в историю болезни |
 | is\_completed | Bool | yes(false) | Назначено |
 | is\_patient\_confirmed | Boolean | yes | Подтверждение назначения пациентом |
 | staff\_id | Integer | Yes | Ключ врача, сделавшего назначение |
 | description | text | no | Описание назначения |
 | created\_time | Datetime | Yes | Дата и время создания назначения |
 | completed\_time | Datetime | No | Дата и время факта назначения |
 | enabled | boolean | yes | Ограничение использования |
 В назначение входят назначение лекарств, назначение обследований. Назначение попадает в запись истории болезни только после того как врач отметит его как назначенное.
 -- -
> Обследование пациентов
 -- -
 **patient\_testing**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ записи |
 | medical\_history\_id | Integer (key) | yes | Ключ истории болезни |
 | analysis\_group\_id | Integer (key) | yes | Ключ группы анализов |
 | date\_begin | date | yes | Планируемая дата начала сдачи анализа |
 | date\_end | Date | no | Планируемая дата окончания сдачи анализа |
 | actual\_date | date | no | Фактическая дата сдачи анализа |
 | processed | boolean | Yes | Статус принятия в работу врачом |
 | medical\_record\_id | Integer | No | Ключ записи в истории болезни |
 | entering\_user | integer(key) | No | Пользователь, вносивший результаты |
 | photo | String (500) | no | Ссылка на фото |
 | enabled | boolean | yes (default - true) | Ограничение использования |
 -- -
> Назначение лекарства
 -- -
 **prescription\_medicine**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | Id | integer (primary) | yes | Ключ лекарства по назначению |
 | prescription\_id | Integer (foreign key) | yes | Ключ назначения |
 | medicine\_id | Integer (foreign key) | yes | Ключ лекарства |
 | reception\_method\_id | integer | yes | Способ приема |
 | instruction | text | yes | Инструкция по применению |
 | staff\_id | integer(key) | Yes | Ключ врача, назначившего лекарство |
 | inclusion\_time | Datetime | Yes | Дата и время включения лекарства в назначение |
 | enabled | boolean | yes | Ограничение использования |
 -- -
> Результат анализа пациента
 -- -
 **patient\_testing\_result**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ результата анализа |
 | patient\_testing\_id | Integer (foreign key) | yes | Ключ обследования |
 | analysis\_rate\_id | integer (foreign key) | yes | Ключ предельных нормальных значений анализа |
 | analysis\_id | Integer (foreign key) | Yes | Ключ анализа |
 | result | float | Yes | Результат анализа |
 | enabled | boolean | yes (default - true) | Ограничение использования |
-- -
> Прием пациента
 -- -
 **patient\_appointment**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ приема |
 | medical\_record\_id | integer (foreign key) | yes | Ключ записи в историю болезни |
 | medical\_history\_id | Integer (foreign key) | Yes | Ключ истории болезни |
 | staff\_id | integer (foreign key) | yes | Ключ врача |
 | recomendation | text | yes | Рекомендации врача |
 |complaints | ManyToMany (complaints_ids) | no | Жалобы |
 |complaints_comment|Text|No|Комментарий врача по жалобам|
 |objective_status|Text|No|Объективный статус|
 |therapy|Text|No|Терапия|
 | appointment\_type\_id | Integer | Yes | Вид приема |
 | appointment\_time | Datetime | Yes | Дата и время приема |
 | is\_confirmed | Boolean | Yes | Флаг подтверждения пациентом |
 | enabled | boolean | yes | Ограничение использования |
 -- -
>Уведомление
 -- -
 **notification**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ уведомления |
 | medical\_history | integer(foreign key) | yes | История болезни |
 | notification\_type\_id | integer(foreign key) | yes | Название вида уведомления |
 | medical\_record\_id | Integer (foreign key) | **no** | Ключ записи в истории болезни |
 | staff\_id | Integer (foreign key) | yes | Ключ врача |
 | notification\_time | datetime | yes | Дата и время уведомления |
 | text | Text | no | Текст уведомления |
 | enabled | boolean | yes | Ограничение использования |
 -- -
> Назначение обследования
 -- -
 **prescription\_testing**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | Id | integer (primary) | yes | Ключ лекарства по назначению |
 | prescription\_id | integer(foreign key) | yes | Ключ назначения |
 | patient\_testing\_id | Integer (foreign key) | yes | Ключ обследования |
 | staff\_id | Integer (foreign key) | Yes | Ключ врача, назначившего обследование |
 | inclusion\_time | Datetime | Yes | Дата и время включения обследования в назначение |
 | enabled | boolean | yes | Ограничение использования |
 -- -
###Врачи
 -- -
> Должность
 -- -
 **position**
 
 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ должности |
 | name | string (50) | yes | Название должности |
 | enabled | boolean | yes (default - 1) | Ограничение использования |
 -- -
###Прочие справочники
 -- -
>Справочник ЛПУ (ФФОМС)
 -- -
 **lpu**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | Id | integer (primary) | yes | Ключ лекарства по назначению |
 | oktmo\_region\_id | integer | no | Код ОКТМО региона |
 | region\_name | string(100) | yes | Название региона |
 | years | string(255) | Yes | Годы обновления в справочнике |
 | code | string(6) | Yes | Код ЛПУ |
 | full\_name | string(255) | no | Полное наименование ЛПУ |
 | caption | string(255) | yes | Краткое наименование ЛПУ |
 | OKOPF | string(5) | yes | Код ОКОПФ |
 | postCode | string(6) | No | Почтовый индекс |
 | address | string(255) | yes | Адрес |
 | directorLastName | string(50) | Yes | Фамилия руководителя |
 | directorFirstName | string(50) | Yes | Имя руководителя |
 | directorPatronymicName | string(50) | No | Отчество руководителя |
 | phone | string(50) | No | Телефон |
 | fax | String(50) | No | Факс |
 | Email | String(100) | No | Email |
 | license | String(50) | No | Номер лицензии |
 | LicenseDate | Date | No | Дата лицензии |
 | licenseDateEnd | Date | no | Дата завершения срока лицензии |
 | medicalCareTypes | string(255) | No | Виды медицинской помощи |
 | includeDate | Date | Yes | Дата включения в реестр |
 -- -
>ОКСМ
 -- -
 **oksm**

 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | Ключ должности |
 | A2 | string (2) | yes | Двузначный код страны |
 | A3 | String (3) | yes | Трехзначный код страны |
 | N3 | integer | Yes | Числовой код страны |
 | caption | String (255) | Yes | Название страны |
-- -
>ОКТМО
 -- -
 **oktmo**
 
 | row\_name | type | обязательность | описание |
 | ------ | ------ | ------ | ------ |
 | id | integer (primary) | yes | 
 | kod | integer | yes | 
 | Kod2 | integer | yes | 
 | subKod1 | integer | Yes | 
 | subKod2 | integer | Yes | 
 | subKod3 | integer | yes | 
 | subKod4 | integer | yes | 
 | p1 | integer | yes | 
 | p2 | integer | yes | 
 | kch | integer | Yes | 
 | name | String (300) | Yes | 
 | name2 | String (300) | yes | 
 | notes | String (255) | yes | 
 | federalDistrictId | integer | yes | 
 | federalDistrictName | String (255) | yes | 
 | regionId | integer | yes | 
 | regionName | string(255) | yes | 
 | settlementTypeId | integer | yes | 
 | settlementTypeName | string(255) | yes | 
 -- -