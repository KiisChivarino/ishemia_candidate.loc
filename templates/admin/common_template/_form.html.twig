{{ form_start(form) }}
    {% macro recursiveForm(form) %}
        {% if
            form.vars.multiple is defined and form.vars.multiple
            and form.vars.expanded is defined and form.vars.expanded %}
            <li>
            <span class="title">{{ form_label(form) }}</span>
        {% endif %}
        {% if form.children is empty %}
            {% if form.parent and form.parent.vars.choices is not defined %}
                <li>
            {% endif %}
            {% if 'hidden' not in form.vars.block_prefixes %}
                <span class="title">{{ form_label(form) }}</span>
                {{ form_widget(form) }}
                <small>{{ form_help(form) }}</small>
                <div class="form-error">
                    {{ form_errors(form) }}
                </div>
            {% endif %}
            {% if form.parent and form.parent.vars.choices is not defined %}
                </li>
            {% endif %}
        {% else %}
            {% for item in form %}
                {{ _self.recursiveForm(item) }}
            {% endfor %}
        {% endif %}
        {% if
            form.vars.multiple is defined and form.vars.multiple
            and form.vars.expanded is defined and form.vars.expanded %}
            </li>
        {% endif %}
    {% endmacro %}
<ul>
    {{ _self.recursiveForm(form) }}
</ul>
<div class="buttons">
    <button class="btn btn--mode">{{ button_label|default(template.items.form.content.formButtonLabel) }}</button>
</div>
{{ form_end(form) }}